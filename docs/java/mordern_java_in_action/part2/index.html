<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Part2. 함수형 데이터 처리 #  4장 스트림 소개 #  스트림이란 무엇인가 Stream 자바 8 API 새로 추가된 기능이다.
자바 7의 코드
List<Dish> lowCaloricDishes = new ArrayList<>(); for(Dish dish: menu) { if(dish.getCalories() < 400) { lowCaloricDishes.add(dish); } } Collections.sort(lowCaloricdishes, new Comparator<Dish>() { // 익명 클래스로 요리 정렬  pulbic int compare(Dish dish1, Dish dish2) { return Integer.compare(dish1.getCalories(), dish2.getCalories()); } }); List<String> lowCaloricDishesName = new ArrayList(); for(DIsh dish: lowCaloricDishes) { lowCaloricDishesName."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Part2. 함수형 데이터 처리"><meta property="og:description" content="Part2. 함수형 데이터 처리 #  4장 스트림 소개 #  스트림이란 무엇인가 Stream 자바 8 API 새로 추가된 기능이다.
자바 7의 코드
List<Dish> lowCaloricDishes = new ArrayList<>(); for(Dish dish: menu) { if(dish.getCalories() < 400) { lowCaloricDishes.add(dish); } } Collections.sort(lowCaloricdishes, new Comparator<Dish>() { // 익명 클래스로 요리 정렬  pulbic int compare(Dish dish1, Dish dish2) { return Integer.compare(dish1.getCalories(), dish2.getCalories()); } }); List<String> lowCaloricDishesName = new ArrayList(); for(DIsh dish: lowCaloricDishes) { lowCaloricDishesName."><meta property="og:type" content="article"><meta property="og:url" content="https://sogmy.github.io/docs/java/mordern_java_in_action/part2/"><meta property="article:section" content="docs"><title>Part2. 함수형 데이터 처리 | DevLog</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e246e6a45b940b6ff71d8216783f10a80d910290a7c364c8bfd5d305d8545d62.css integrity="sha256-4kbmpFuUC2/3HYIWeD8QqA2RApCnw2TIv9XTBdhUXWI="><script defer src=/en.search.min.8f3f4518b0b336d1e818146ca73478b5822c54ab8a344af158fa52c7c27488fc.js integrity="sha256-jz9FGLCzNtHoGBRspzR4tYIsVKuKNErxWPpSx8J0iPw="></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><span>DevLog</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Java</span><ul><li><a href=https://sogmy.github.io/docs/java/java_convert_interger_list/>Java Convert Interger List</a></li><li><a href=https://sogmy.github.io/docs/java/java_map_iterate/>Java Map to Iterate</a></li><li><a href=https://sogmy.github.io/docs/java/javatype/>Primitive type, Reference type</a></li><li><input type=checkbox id=section-c7aeb586f4bfe724a4d2397888671ae7 class=toggle checked>
<label for=section-c7aeb586f4bfe724a4d2397888671ae7 class="flex justify-between"><a>Mordern Java in Action</a></label><ul><li><a href=https://sogmy.github.io/docs/java/mordern_java_in_action/part1/>Part 1. 기초</a></li><li><a href=https://sogmy.github.io/docs/java/mordern_java_in_action/part2/ class=active>Part2. 함수형 데이터 처리</a></li><li><a href=https://sogmy.github.io/docs/java/mordern_java_in_action/part3/>Part3. 스트림과람다</a></li><li><a href=https://sogmy.github.io/docs/java/mordern_java_in_action/part5/>Part5. 개선된 자바 동시성</a></li><li><a href=https://sogmy.github.io/docs/java/mordern_java_in_action/part6/>Part5. 함수형 프로그래밍과 자바 진화의 미래</a></li></ul></li><li><span>Ect</span><ul><li><a href=https://sogmy.github.io/docs/java/ect/java_string_method/>Java String Method</a></li><li><a href=https://sogmy.github.io/docs/java/ect/java_charter/>Java Charter</a></li><li><a href=https://sogmy.github.io/docs/java/ect/java_math/>Java Math</a></li><li><a href=https://sogmy.github.io/docs/java/ect/javax_valid/>javax @Valid</a></li></ul></li></ul></li><li class=book-section-flat><span>Spring</span><ul><li><a href=https://sogmy.github.io/docs/spring/life_cycle/>Life Cycle</a></li></ul></li><li class=book-section-flat><span>Database</span><ul><li><a href=https://sogmy.github.io/docs/database/mysql_index/>Mysql Index</a></li><li><a href=https://sogmy.github.io/docs/database/mysql_trainsaction_level/>Mysql Trainsaction Level</a></li></ul></li><li class=book-section-flat><span>Infra</span><ul><li><a href=https://sogmy.github.io/docs/infra/scale_up_scale_out/>Scale-up, Scale-out</a></li></ul></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Part2. 함수형 데이터 처리</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#4장-스트림-소개>4장 스트림 소개</a></li><li><a href=#5장-스트림-활용>5장 스트림 활용</a></li><li><a href=#6장-스트림으로-데이터-수집>6장 스트림으로 데이터 수집</a></li><li><a href=#7장-병렬-데이터-처리와-성능>7장 병렬 데이터 처리와 성능</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=part2-함수형-데이터-처리>Part2. 함수형 데이터 처리
<a class=anchor href=#part2-%ed%95%a8%ec%88%98%ed%98%95-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%b2%98%eb%a6%ac>#</a></h1><h3 id=4장-스트림-소개>4장 스트림 소개
<a class=anchor href=#4%ec%9e%a5-%ec%8a%a4%ed%8a%b8%eb%a6%bc-%ec%86%8c%ea%b0%9c>#</a></h3><p><strong>스트림이란 무엇인가</strong>
Stream 자바 8 API 새로 추가된 기능이다.</p><p>자바 7의 코드</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> lowCaloricDishes <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
<span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>Dish dish<span style=color:#f92672>:</span> menu<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>dish<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 400<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        lowCaloricDishes<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>dish<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

Collections<span style=color:#f92672>.</span><span style=color:#a6e22e>sort</span><span style=color:#f92672>(</span>lowCaloricdishes<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Comparator<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// 익명 클래스로 요리 정렬
</span><span style=color:#75715e></span>    pulbic <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>compare</span><span style=color:#f92672>(</span>Dish dish1<span style=color:#f92672>,</span> Dish dish2<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>compare</span><span style=color:#f92672>(</span>dish1<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>(),</span> dish2<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span>

List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> lowCaloricDishesName <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>();</span>
<span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>DIsh dish<span style=color:#f92672>:</span> lowCaloricDishes<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    lowCaloricDishesName<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>dish<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>

</code></pre></div><p>자바 8 후의 코드</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import static</span> java.util.Comparator.comparing<span style=color:#f92672>;</span>
<span style=color:#f92672>import static</span> java.util.stream.Collectors.toList<span style=color:#f92672>;</span>

List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> lowCaloricDishesName <span style=color:#f92672>=</span>
                menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> <span style=color:#75715e>//parallelStream 을 사용하면 병렬 
</span><span style=color:#75715e></span>                    <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> d<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 400<span style=color:#f92672>&gt;)</span> <span style=color:#75715e>//400 칼로리 미만의 요리 선택
</span><span style=color:#75715e></span>                    <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>(</span>comparing<span style=color:#f92672>(</span>Dishes<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>))</span> <span style=color:#75715e>// 칼로리로 정렬
</span><span style=color:#75715e></span>                    <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getName<span style=color:#f92672>)</span> <span style=color:#75715e>// 요리명 추출
</span><span style=color:#75715e></span>                    <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span> <span style=color:#75715e>// 모든 요리명 리스트에 저장
</span><span style=color:#75715e></span>
</code></pre></div><p>자바 8 스트림 API 의 특징</p><ul><li>선언형 : 더 간결하고 가독성이 좋아진다.</li><li>조립할 수 있음 : 유연성이 좋아진다.</li><li>병렬성 : 성능이 좋아진다.</li></ul><p><strong>스트림 시작하기</strong></p><p>데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소 (Squence of element)로 정의할 수 있다.</p><ul><li>연속 된 요소</li><li>소스</li><li>데이터 처리 연산</li></ul><p>스트림의 주요 특징</p><ul><li>파이프라이닝 : Laziness, short-circuiting</li><li>내부반복</li></ul><p>스트림의 주요 기능</p><ul><li>filter : 람다를 인수로 받아 스트림에서 특정 요소를 제외시킨다.</li><li>map : 람다를 이용해서 한 요소를 다른 요소로 변환하거나 정보를 추출한다.</li><li>limit: 스트림 크기를 제한한다.</li><li>collect: 스트림을 다른 형식으로 변환한다.</li></ul><p><img src=/images/stream.png alt=Stream></p><p><strong>스트림의 연산</strong></p><ul><li>중간연산 - 쇼트 서킷, 서로 다른 연산이지만 병합되는 기법 루프 퓨전(loop fusioin)</li><li>최종연산</li></ul><h3 id=5장-스트림-활용>5장 스트림 활용
<a class=anchor href=#5%ec%9e%a5-%ec%8a%a4%ed%8a%b8%eb%a6%bc-%ed%99%9c%ec%9a%a9>#</a></h3><p><img src=/images/stream_%ec%97%b0%ec%82%b0.jpg alt=중간연산과최종연산></p><p><strong>Optional?</strong><br>Optional 값의 존재나 부재 여부를 표현하는 컨테이너 클래스<br>null 은 쉽게 에러를 일으킬 수 있으므로 자바 8 라이브러리 설계자는 Optional를 만들었다.</p><ul><li>isPresent(): 값이 있으면 참을 반환한다.</li><li>T get() : 값이 존재하면 값을 반환하고 없으면 NoSuchElementException을 일으킨다.</li><li>T orElse(T other): 값이 있으면 값을 반환하고, 값이 없으면 기본값을 반환한다.</li></ul><p><strong>findFirst와 findAny 는 언제 사용하나?</strong><br>병렬 스트림에서는 첫 번째 요소를 찾기 어렵다.
요소의 순서가 상관없다면 findAny를 사용한다.</p><p><strong>리듀싱</strong>
모든 스트림 요소를 반복 처리해서 값으로 도출하는 리듀싱 연산을 한다.
함수형 프로그래밍 언어 용어로는 폴드라고 부른다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> x <span style=color:#f92672>:</span> number<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    sum <span style=color:#f92672>+=</span> x<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>//초기 값 0 
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> <span style=color:#f92672>(</span> a<span style=color:#f92672>,</span>b<span style=color:#f92672>,)</span> <span style=color:#f92672>-&gt;</span> a <span style=color:#f92672>+</span> b<span style=color:#f92672>);</span>

<span style=color:#75715e>//초기 값 없이 사용
</span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> sum <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>((</span>a<span style=color:#f92672>,</span>b<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>+</span> b<span style=color:#f92672>));</span>

<span style=color:#75715e>//최대값 최솟값
</span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> max <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>::</span>max<span style=color:#f92672>);</span>
Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> min <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>::</span>min<span style=color:#f92672>);</span>
</code></pre></div><h3 id=6장-스트림으로-데이터-수집>6장 스트림으로 데이터 수집
<a class=anchor href=#6%ec%9e%a5-%ec%8a%a4%ed%8a%b8%eb%a6%bc%ec%9c%bc%eb%a1%9c-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%88%98%ec%a7%91>#</a></h3><h3 id=7장-병렬-데이터-처리와-성능>7장 병렬 데이터 처리와 성능
<a class=anchor href=#7%ec%9e%a5-%eb%b3%91%eb%a0%ac-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%b2%98%eb%a6%ac%ec%99%80-%ec%84%b1%eb%8a%a5>#</a></h3></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#4장-스트림-소개>4장 스트림 소개</a></li><li><a href=#5장-스트림-활용>5장 스트림 활용</a></li><li><a href=#6장-스트림으로-데이터-수집>6장 스트림으로 데이터 수집</a></li><li><a href=#7장-병렬-데이터-처리와-성능>7장 병렬 데이터 처리와 성능</a></li></ul></li></ul></nav></div></aside></main></body></html>